<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Audio Player</title>
    <link rel="stylesheet" href="styles/style.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
    <div id="audio-player-container">
        <div class="main-header">
            <h1>did you hear that...</h1>
            <button id="manage-feeds-button" title="Manage Feeds">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
            </button>
        </div>

        <!-- Feed Management Modal (Hidden by default) -->
        <div id="feed-modal-overlay" class="modal-overlay hidden">
            <div id="feed-management" class="modal-content">
                <button id="close-feed-modal" class="close-modal-button" title="Close">&times;</button>
                <h2>Manage Feeds</h2> 
                <div id="feed-selector-container">
                    <label for="feed-select">Current Feed:</label>
                    <select id="feed-select"></select>
                    <button class="help-link" id="help-button" title="Learn how to create a custom feed">?</button>
                </div>
                <div id="add-feed-container">
                    <input type="url" id="feed-url" placeholder="Enter JSON feed URL to add">
                    <button id="add-feed-button">Add Feed</button>
                </div>
                <div id="feed-notification"></div>
                <div id="feed-suggestion">
                    Try a <a href="#" id="sample-feed-link">sample feed</a> to get started
                </div>
                
                <!-- Custom Feeds Management UI -->
                <div id="custom-feeds-container">
                    <div class="custom-feeds-header">
                        <h3>Your Custom Feeds</h3>
                        <button id="toggle-custom-feeds-btn" aria-expanded="false">
                            <span>Manage</span>
                            <span class="toggle-icon">▼</span>
                        </button>
                    </div>
                    <ul id="custom-feeds-list" class="hidden"></ul>
                </div>
    
                <!-- Help Dialog (already part of feed management) -->
                <div id="help-dialog" class="hidden">
                    <div class="help-dialog-content">
                        <h3>Creating Custom Feeds</h3>
                        <button id="close-help-dialog">×</button>
                        <p>A custom feed must be a JSON file with the following structure:</p>
                        <pre>{
      "feeds": [
        {
          "id": "unique-feed-id",
          "title": "My Custom Feed",
          "tracks": [
            {
              "id": "track-1",
              "title": "Track Title",
              "audioUrl": "https://example.com/audio.mp3",
              "description": "About this track",
              "albumArt": "https://example.com/cover.jpg"
            }
          ]
        }
      ]
    }</pre>
                        <p>Key requirements:</p>
                        <ul>
                            <li>Each feed needs an <code>id</code>, <code>title</code>, and <code>tracks</code> array</li>
                            <li>Each track needs an <code>id</code>, <code>title</code>, and <code>audioUrl</code></li>
                            <li>Tracks can include optional <code>description</code> and <code>albumArt</code></li>
                            <li>Audio URLs can be relative or absolute URLs</li>
                        </ul>
                        <p>Try clicking the "sample feed" link to see a working example!</p>
                    </div>
                </div>
            </div> <!-- End #feed-management -->
        </div> <!-- End #feed-modal-overlay -->

        <!-- Album Art Area -->
        <div id="album-art">
            <svg id="default-album-art" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 14.5c-2.49 0-4.5-2.01-4.5-4.5S9.51 7.5 12 7.5s4.5 2.01 4.5 4.5-2.01 4.5-4.5 4.5zm0-5.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"/>
            </svg>
            <img id="custom-album-art" src="" style="display: none;">
        </div>

        <!-- Player Controls -->
        <div id="player-controls">
            <audio id="audio-player"></audio>
            <div class="custom-controls">
                <div class="time-and-seek">
                    <span id="current-time" class="time-display">0:00</span>
                    <input type="range" id="seek-bar" value="0" min="0" max="100" step="1">
                    <span id="duration" class="time-display">0:00</span>
                </div>
                <div class="main-control">
                    <button id="play-pause-button">▶</button>
                </div>
                <div class="speed-controls">
                    <button class="speed-button" data-speed="0.5">0.5x</button>
                    <button class="speed-button active" data-speed="1">1x</button>
                    <button class="speed-button" data-speed="1.5">1.5x</button>
                    <button class="speed-button" data-speed="2">2x</button>
                </div>
            </div>
        </div>

        <!-- Current Track Information -->
        <div id="current-track-info">
            <div class="track-info-art-container">
                <!-- Default placeholder icon -->
                <svg id="track-info-default-art" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 14.5c-2.49 0-4.5-2.01-4.5-4.5S9.51 7.5 12 7.5s4.5 2.01 4.5 4.5-2.01 4.5-4.5 4.5zm0-5.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"/>
                </svg>
                <!-- Custom image -->
                <img id="track-info-custom-art" src="" style="display: none;">
            </div>
            <div class="track-info-text">
                <h2>No Track Selected</h2>
                <p>Select a track from the list below to start playing.</p>
            </div>
        </div>

        <!-- Track List -->
        <div id="track-list-container">
            <h2>Tracks</h2>
            <ul id="track-list"></ul>
        </div>

        <footer>
            <p>
                Free & Open Source on 
                <a href="https://github.com/jmcpheron/did-you-hear-that" target="_blank" rel="noopener noreferrer">GitHub</a>. 
                Contributions, issues, and suggestions welcome!
            </p>
        </footer>
    </div>

    <script src="scripts/main.js"></script>
</body>
</html> 